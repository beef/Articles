<h1>Listing Articles</h1>

<ul class="choices">
  <li><%= link_to 'New article', new_admin_article_path %></li>
</ul>

<%= will_paginate %>

<table>
  <thead>
    <tr>
      <%= sortable_table_header :name => "Title", :sort => "title" %>
      <%= sortable_table_header :name => "Status",  :sort => "published_at" %>
      <%= sortable_table_header :name => "Author",  :sort => "created" %>
      <%= sortable_table_header :name => "Editor",  :sort => "updated" %>
      <%= sortable_table_header :name => "Updated",  :sort => "updated_at" %>
      <%= sortable_table_header :name => "Created",  :sort => "created_at" %>
      <%= sortable_table_header :name => "Published At",  :sort => "published_at" %>
      <%= sortable_table_header :name => "Published To",  :sort => "published_to" %>
      <%= sortable_table_header :name => "Comments",  :sort => "comments" %>
      <th colspan="3">Actions</th>
    </tr>
  </thead>
  <tbody>
<% @articles.each do |article| %>
    <tr id="article-<%= article.id %>">
      <td><%= link_to h( article.title ), admin_article_path(article) %></td>
      <td><%= content_status(article) %></td>
      <td><%= article.author %></td>
      <td><%= article.editor %></td>
      <td><%= article.updated_at.strftime('%d %b') %></td>
      <td><%= article.created_at.strftime('%d %b') %></td>
      <td><%= article.published_at.strftime('%d %b') unless article.published_at.nil? %></td>
      <td><%= article.published_to.strftime('%d %b') unless article.published_to.nil? %></td>
      <td><%= link_to pluralize(article.comments.count, 'Comment'), admin_article_comments_path(article) %></td>
      <td><%= link_to 'Show', article_url(article), :class => 'show' if article.published? %></td>
      <td><%= link_to 'Edit', admin_article_path(article), :class => 'edit' %></td>
      <td><%= link_to 'Delete', admin_article_path(article), :confirm => 'Are you sure?', :method => :delete, :class => 'delete' %></td>
    </tr>
<% end %>
  </tbody>
  <tfoot>
    <tr>
      <%= sortable_table_header :name => "Title", :sort => "title" %>
      <%= sortable_table_header :name => "Status",  :sort => "published_at" %>
      <%= sortable_table_header :name => "Author",  :sort => "created_by" %>
      <%= sortable_table_header :name => "Editor",  :sort => "updated_by" %>
      <%= sortable_table_header :name => "Updated",  :sort => "updated_at" %>
      <%= sortable_table_header :name => "Created",  :sort => "created_at" %>
      <%= sortable_table_header :name => "Published At",  :sort => "published_at" %>
      <%= sortable_table_header :name => "Published To",  :sort => "published_to" %>
      <%= sortable_table_header :name => "Comments",  :sort => "comments" %>
      <th colspan="3">Actions</th>
    </tr>
  </tfoot>
</table>

<%= will_paginate %>

